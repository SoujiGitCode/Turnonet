!function(u){u.fn.carousel3d=function(e){var r={carousel_frame:u(this)},a=r.carousel_frame.children().size(),n=r.carousel_frame.width(),t=Math.round(n/2/Math.tan(Math.PI/a));r.carousel_frame.css({transform:"rotateY(0deg) translateZ(-"+t+"px)"});var c=0,s=0,o=360/a,f=0;function l(){for(c=o*s,u("#test").text(c+", "+s+", "),i=0;i<a;i++){var e=s*o+i*o;f==i?(r.carousel_frame.children("figure:eq("+i+")").css({transform:"rotateY("+e+"deg ) translateZ("+t+"px)"}),r.carousel_frame.children("figure:eq("+i+")").css({opacity:"1"})):(r.carousel_frame.children("figure:eq("+i+")").css({transform:"rotateY("+e+"deg ) translateZ("+t+"px)"}),r.carousel_frame.children("figure:eq("+i+")").css({opacity:"0.5"}))}c=0,7==(f+=1)&&(f=0)}l(),u(".next").on("click",function(){s-=1,l()}),u(".prev").on("click",function(){s+=1,l()}),r.carousel_frame.children().on("click",function(){new_int=-1*u(this).index(),s=new_int<s+a/2*-1?a+new_int:new_int,l()})}}(jQuery);